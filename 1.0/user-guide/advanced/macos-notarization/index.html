<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Zev Lee">
        <link rel="canonical" href="https://pydeployment.github.io/pydeployment/1.0/user-guide/advanced/macos-notarization/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>macOS Notarization - PyDeployment</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../../../css/extra.css" rel="stylesheet">
        <link href="../../../css/version-select.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">PyDeployment</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../" class="dropdown-item">User Guide</a>
</li>
                                    
<li>
    <a href="../../getting-started/" class="dropdown-item">Getting Started</a>
</li>
                                    
<li>
    <a href="../../build-options/" class="dropdown-item">Build Options</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Setting Build Options</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../setting-options/" class="dropdown-item">Setting Build Options</a>
</li>
            
<li>
    <a href="../../setting-options/env-file/" class="dropdown-item">Using an Environment File</a>
</li>
            
<li>
    <a href="../../setting-options/command-line/" class="dropdown-item">Using the Command Line</a>
</li>
            
<li>
    <a href="../../setting-options/using-both/" class="dropdown-item">Using Both</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Advanced Usage</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../" class="dropdown-item">Advanced Usage</a>
</li>
            
<li>
    <a href="../archive-file/" class="dropdown-item">Package as an Archive File</a>
</li>
            
<li>
    <a href="../custom-venv/" class="dropdown-item">Using a Custom Virtual Environment</a>
</li>
            
<li>
    <a href="../custom-nsis/" class="dropdown-item">Using a Custom NSIS File</a>
</li>
            
<li>
    <a href="../custom-makensis/" class="dropdown-item">Using a Custom Makensis Binary</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">macOS Notarization</a>
</li>
            
<li>
    <a href="../custom-appimagetool/" class="dropdown-item">Using a Custom Appimagetool Binary</a>
</li>
            
<li>
    <a href="../passing-args-to-pyi/" class="dropdown-item">Passing Arguments to PyInstaller</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../about/release-notes/" class="dropdown-item">Release Notes</a>
</li>
                                    
<li>
    <a href="../../../about/contributing/" class="dropdown-item">Contributing</a>
</li>
                                    
<li>
    <a href="../../../about/license/" class="dropdown-item">License</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../custom-makensis/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../custom-appimagetool/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/pydeployment/pydeployment/edit/master/docs/user-guide/advanced/macos-notarization.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#macos-notarization" class="nav-link">macOS Notarization</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#requirements" class="nav-link">Requirements</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#code-sign" class="nav-link">Code Sign</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#notarize-with-a-stored-keychain-profile" class="nav-link">Notarize With a Stored Keychain Profile</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#notarize-without-a-stored-keychain-profile" class="nav-link">Notarize Without a Stored Keychain Profile</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="macos-notarization">macOS Notarization</h1>
<p>Sign and notarize your app on macOS.</p>
<hr />
<p>Applications on macOS need to be notarized by Apple in order to run on other
macOS devices without warning. This is accomplished by code signing the
app bundle generated by PyInstaller, submitting the file to Apple, then
stapling a notarization ticket to the app bundle.</p>
<h2 id="requirements">Requirements</h2>
<p>Code signing an app bundle requires an active Apple Developer account. You will
need to create a Developer ID certificate for signing applications. Follow the
<a href="https://developer.apple.com/help/account/create-certificates/create-developer-id-certificates">instructions on the Apple Developer support page</a>
to create a Developer ID certificate.</p>
<p>You will need to install Xcode 13 or later to gain access to the <code>xcrun</code>
command, which PyDeployment uses during the notarization process. You may need to
use the <code>xcode-select</code> utility to choose an appropriate version of Xcode.</p>
<pre><code>sudo xcode-select -s /path/to/Xcode13.app
</code></pre>
<h2 id="code-sign">Code Sign</h2>
<p>To code sign the app bundle generated by PyInstaller, include the Common Name
of your Developer ID certificate in your build options. This can be included as
<code>CERT</code> in the environment file or by using <code>-C</code>, <code>--cert</code>, or <code>--certificate</code>
to include the value as a command line argument. For example, the following
command will code sign the application generated by <code>myapp.spec</code> with the
specified Developer ID certificate.</p>
<pre><code>pydeploy myapp.spec -C 'Developer ID Application: Name Here (TEAMIDHERE)'
</code></pre>
<p>Note that this application will still need to be submitted for notarization
separately.</p>
<h2 id="notarize-with-a-stored-keychain-profile">Notarize With a Stored Keychain Profile</h2>
<p>If you wish to both sign and notarize your application, you have two options
for information to include.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Option 1</th>
<th style="text-align: left;">Option 2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Name of a stored Keychain Profile</td>
<td style="text-align: left;">Apple ID, Team ID, and an App-Specific Password</td>
</tr>
</tbody>
</table>
<p>You will want to create an App Store Connect API key and save it locally on
your device. Then run the following command to store the Keychain Profile with
the name of your choice.</p>
<pre><code>xcrun notarytool store-credentials 'profile-name' -k &lt;key&gt; -d &lt;key-id&gt; -i &lt;issuer&gt;
</code></pre>
<p>The field <code>&lt;key&gt;</code> refers to the path to the App Store Connect API Key. Field
<code>&lt;key-id&gt;</code> refers to the App Store Connect API Key ID, which is usually 10
alphanumeric characters. The field <code>&lt;issuer&gt;</code> refers to the App Store Connect
Issuer ID, which is in UUID format.</p>
<p>It is possible to store a Keychain Profile using the information in Option 2.
Use the following command to do so.</p>
<pre><code>xcrun notarytool store-credentials `keychain-profile-name` --apple-id &lt;apple-id&gt; --team-id &lt;team-id&gt; --password &lt;password&gt;
</code></pre>
<p>The field <code>&lt;apple-id&gt;</code> refers to your Apple ID, an email address. Field
<code>&lt;team-id&gt;</code> refers to your Team ID, which is usually 10 uppercase alphanumeric
characters. The field <code>&lt;password&gt;</code> refers to the an App-Specific Password,
which has the format of 16 lowercase alphabetical characters separated into
groups of 4 characters by hyphens, e.g. <code>pass-word-goes-here</code>.</p>
<p>With your Keychain Profile now stored, you may now use PyDeployment while
specifying its name.</p>
<pre><code>pydeploy myapp.spec -C 'Developer ID Application: Name Here (TEAMIDHERE)' -K 'profile-name'
</code></pre>
<p>It is recommended to use an App Store Connect API Key to store a Keychain
Profile, as App-Specific Passwords tend to be more fickle.</p>
<h2 id="notarize-without-a-stored-keychain-profile">Notarize Without a Stored Keychain Profile</h2>
<p>If you do not wish to store your information in a Keychain Profile, you can
feed the information from Option 2 directly to PyDeployment for notarization.</p>
<pre><code>pydeploy myapp.spec -C 'Developer ID Application: Name Here (TEAMIDHERE)' -A &lt;apple-id&gt; -T &lt;team-id&gt; -P &lt;password&gt;
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/jquery-3.6.0.min.js"></script>
        <script src="../../../js/bootstrap.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>
        <script src="../../../js/version-select.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
